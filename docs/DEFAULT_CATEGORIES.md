# Предустановленные категории

## Обзор

При регистрации нового пользователя автоматически создаётся набор предустановленных категорий для удобства начала работы с приложением.

## Структура категорий

### Доходы (Income)

1. **Зарплата** (briefcase, #10b981)
2. **Подарки** (gift, #10b981)
3. **Инвестиции** (trending, #10b981)
4. **Прочие доходы** (dollar, #10b981)

### Расходы (Expense)

#### Основные категории:

1. **Еда** (food, #ef4444)
   - Продукты (shopping, #f97316)
   - Рестораны (coffee, #f97316)

2. **Транспорт** (car, #ef4444)
   - Топливо (car, #3b82f6)
   - Общественный транспорт (car, #3b82f6)

3. **Жильё** (home, #ef4444)
   - Аренда (home, #a855f7)
   - Коммунальные (home, #a855f7)
   - Ремонт (home, #a855f7)

4. **Развлечения** (film, #ef4444)
5. **Здоровье** (heart, #ef4444)
6. **Образование** (book, #ef4444)
7. **Покупки** (shopping, #ef4444)
8. **Прочие расходы** (wallet, #ef4444)

## Реализация

Категории создаются автоматически через триггер `on_auth_user_created` при регистрации пользователя.

Функция `create_default_categories(UUID)` создаёт все предустановленные категории для указанного пользователя.

## Кастомизация

Пользователи могут:

- Редактировать названия категорий
- Изменять иконки и цвета
- Удалять ненужные категории
- Создавать свои категории
- Добавлять подкатегории к существующим

## Миграция

Миграция находится в `supabase/migrations/20250101000000_create_default_categories.sql`

Для применения миграции:

```bash
# Через Supabase CLI
supabase db push

# Или через SQL Editor в Supabase Dashboard
```

## Для существующих пользователей

Если нужно добавить предустановленные категории для уже существующих пользователей, можно выполнить:

```sql
-- Для всех пользователей без категорий
DO $$
DECLARE
  user_record RECORD;
BEGIN
  FOR user_record IN
    SELECT id FROM profiles
    WHERE id NOT IN (SELECT DISTINCT user_id FROM categories)
  LOOP
    PERFORM create_default_categories(user_record.id);
  END LOOP;
END $$;
```
